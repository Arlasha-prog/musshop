{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="container my-5">
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <div class="card shadow-sm">
        <div class="card-body p-4">
          <h3 class="mb-1">Спасибо! Заказ оформлен</h3>
          <p class="text-muted mb-4">Номер заказа: <strong>#{{ order.id }}</strong></p>

          <div class="mb-3">
            <h5 class="mb-2">Получатель</h5>
            <div>{{ order.customer_name }}</div>
            <div>{{ order.phone }}</div>
            {% if order.address %}<div>{{ order.address }}</div>{% endif %}
            {% if order.comment %}<div class="text-muted small mt-2">{{ order.comment }}</div>{% endif %}
          </div>

          <h5 class="mt-4 mb-2">Состав заказа</h5>
          <div class="table-responsive">
            <table class="table align-middle">
              <thead>
                <tr>
                  <th>Товар</th>
                  <th class="text-center" style="width:120px;">Кол-во</th>
                  <th class="text-end" style="width:160px;">Цена</th>
                  <th class="text-end" style="width:160px;">Сумма</th>
                </tr>
              </thead>
              <tbody>
                {% for it in items %}
                  <tr>
                    <td>
                      <a href="{% url 'product' it.product.slug %}">{{ it.product.title }}</a>
                    </td>
                    <td class="text-center">{{ it.qty }}</td>
                    <td class="text-end">{{ it.price|floatformat:0 }} ₸</td>
                    <td class="text-end">{{ it.total|floatformat:0 }} ₸</td>
                  </tr>
                {% empty %}
                  <tr>
                    <td colspan="4" class="text-center text-muted">Позиции не найдены</td>
                  </tr>
                {% endfor %}
              </tbody>
              <tfoot>
                <tr>
                  <th colspan="3" class="text-end">Итого:</th>
                  <th class="text-end">
                    {% if order_total %}{{ order_total|floatformat:0 }} ₸{% else %}0 ₸{% endif %}
                  </th>
                </tr>
              </tfoot>
            </table>
          </div>

          <div class="d-flex gap-2 mt-4">
            <a href="{% url 'home' %}" class="btn btn-outline-secondary">На главную</a>
            <a href="{% url 'shop_all' %}" class="btn btn-primary">Вернуться в каталог</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
